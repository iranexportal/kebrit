# ุฑุงูููุง ุชุณุช API ูุง

ุงู ูุงู ุฑุงูููุง ุงุณุชูุงุฏู ุงุฒ ุงุณฺฉุฑูพุชโูุง ุชุณุช API ุจุฑุง ูุฑ app ุงุณุช.

## ๐ ููุฑุณุช ูุงูโูุง ุชุณุช

- `test_users_app.py` - ุชุณุช API ูุง Users App
- `test_roadmap_app.py` - ุชุณุช API ูุง Roadmap App
- `test_exam_app.py` - ุชุณุช API ูุง Exam App
- `test_media_app.py` - ุชุณุช API ูุง Media App

## ๐ง ูพุดโูุงุฒูุง

### 1. ูุตุจ ูุงุจุณุชฺฏโูุง

```bash
# ูุนุงูโุณุงุฒ ูุญุท ูุฌุงุฒ
source .env/bin/activate

# ูุตุจ requests (ุงฺฏุฑ ูุตุจ ูุดุฏู)
pip install requests
```

### 2. ุงุฌุฑุง ุณุฑูุฑ Django

ูุจู ุงุฒ ุงุฌุฑุง ุชุณุชโูุงุ ูุทูุฆู ุดูุฏ ฺฉู ุณุฑูุฑ Django ุฏุฑ ุญุงู ุงุฌุฑุง ุงุณุช:

```bash
python manage.py runserver
```

ุณุฑูุฑ ุจุงุฏ ุฑู `http://127.0.0.1:8000` ุงุฌุฑุง ุดูุฏ.

## ๐ ูุญูู ุงุณุชูุงุฏู

### ุฑูุด 1: ุงุฌุฑุง ูุณุชูู

```bash
# ุชุณุช Users App
python test_users_app.py

# ุชุณุช Roadmap App
python test_roadmap_app.py

# ุชุณุช Exam App
python test_exam_app.py

# ุชุณุช Media App
python test_media_app.py
```

### ุฑูุด 2: ุงุฌุฑุง ุจุง Python

```bash
python3 test_users_app.py
```

### ุฑูุด 3: ุงุฌุฑุง ุจู ุตูุฑุช ุงุฌุฑุง (ุงฺฏุฑ chmod +x ุดุฏู)

```bash
./test_users_app.py
```

## ๐ ุฎุฑูุฌ ุชุณุชโูุง

ูุฑ ุงุณฺฉุฑูพุช ุชุณุช:

1. **ููุงุด ุฏุงุฏูโูุง ุชุณุช**: ุฏุฑ ุงุจุชุฏุง ุฏุงุฏูโูุง ฺฉู ุจุฑุง ุชุณุช ุงุณุชูุงุฏู ูโุดูุฏ ููุงุด ุฏุงุฏู ูโุดูุฏ
2. **ุงุฌุฑุง ุชุณุชโูุง**: ุจุฑุง ูุฑ endpoint ุชุณุชโูุง ุฒุฑ ุงูุฌุงู ูโุดูุฏ:
   - **CREATE (POST)**: ุงุฌุงุฏ ุฑฺฉูุฑุฏ ุฌุฏุฏ
   - **LIST (GET)**: ูุณุช ฺฉุฑุฏู ููู ุฑฺฉูุฑุฏูุง
   - **RETRIEVE (GET)**: ุฏุฑุงูุช ฺฉ ุฑฺฉูุฑุฏ ุฎุงุต
   - **UPDATE (PUT)**: ุจูโุฑูุฒุฑุณุงู ุฑฺฉูุฑุฏ (ุฏุฑ ุตูุฑุช ูุฌูุฏ)
3. **ููุงุด ูุชุงุฌ**: ุจุฑุง ูุฑ ุชุณุชุ status code ู response ููุงุด ุฏุงุฏู ูโุดูุฏ
4. **ุฎูุงุตู**: ุฏุฑ ูพุงุงูุ ูุณุช ID ูุง ุงุฌุงุฏ ุดุฏู ููุงุด ุฏุงุฏู ูโุดูุฏ

## ๐ ุงุญุฑุงุฒ ููุช

**โ๏ธ ุชูุฌู**: API ูุง ูุงุฒ ุจู JWT Token ุฏุงุฑูุฏ. 

ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ุชุณุชโูุง ุจุง ุงุญุฑุงุฒ ููุช:

1. ฺฉ Token ุฏุฑุงูุช ฺฉูุฏ:
```bash
curl -X POST http://127.0.0.1:8000/api/token/ \
  -H "Content-Type: application/json" \
  -d '{"username": "user_id", "password": "password"}'
```

2. Token ุฑุง ุฏุฑ ูุงู ุชุณุช ูุฑุงุฑ ุฏูุฏ:
   - ูุงู ุชุณุช ุฑุง ุจุงุฒ ฺฉูุฏ
   - ุชุงุจุน `get_auth_token()` ุฑุง ูพุฏุง ฺฉูุฏ
   - Token ุฑุง return ฺฉูุฏ:
   ```python
   def get_auth_token():
       return "your-token-here"
   ```

ุง ูโุชูุงูุฏ Token ุฑุง ุจู ุตูุฑุช environment variable ุชูุธู ฺฉูุฏ:

```bash
export API_TOKEN="your-token-here"
```

ู ุฏุฑ ูุงู ุชุณุช:
```python
import os
def get_auth_token():
    return os.getenv('API_TOKEN')
```

## ๐ ูุซุงู ุฎุฑูุฌ

```
============================================================
  USERS APP API TEST SUITE
============================================================

============================================================
  TEST DATA
============================================================
{
  "company": {
    "name": "Test Company 20241227143000"
  },
  "user": {
    "uuid": "123e4567-e89b-12d3-a456-426614174000",
    "mobile": "09123456789",
    "name": "Test User",
    "password": "testpassword123"
  }
}

============================================================
  TESTING COMPANIES API
============================================================

1. CREATE Company (POST)
   Status: 201
   Created Company ID: 1
   Response: {
     "id": 1,
     "name": "Test Company 20241227143000"
   }

2. LIST Companies (GET)
   Status: 200
   Total Companies: 5
```

## โ๏ธ ูฺฉุงุช ููู

1. **ุฏุงุฏูโูุง ุชุณุช**: ุฏุงุฏูโูุง ุงุฌุงุฏ ุดุฏู ุฏุฑ ุฏุชุงุจุณ ุจุงู ูโูุงููุฏ. ุฏุฑ ุตูุฑุช ูุงุฒุ ุขูโูุง ุฑุง ุจู ุตูุฑุช ุฏุณุช ูพุงฺฉ ฺฉูุฏ.

2. **ูุงุจุณุชฺฏโูุง**: ุจุฑุฎ endpoint ูุง ูุงุฒ ุจู ูุฌูุฏ ุฑฺฉูุฑุฏูุง ุฏฺฏุฑ ุฏุงุฑูุฏ:
   - `User` ูุงุฒ ุจู `Company` ุฏุงุฑุฏ
   - `MissionResult` ูุงุฒ ุจู `Mission` ุฏุงุฑุฏ
   - `QuizResponse` ูุงุฒ ุจู `Quiz` ู `Question` ุฏุงุฑุฏ

3. **ุฎุทุงูุง ุงุญุชูุงู**:
   - **401 Unauthorized**: ูุงุฒ ุจู Token ุฏุงุฑุฏ
   - **400 Bad Request**: ุฏุงุฏูโูุง ุงุฑุณุงู ูุงูุนุชุจุฑ ุงุณุช
   - **404 Not Found**: ุฑฺฉูุฑุฏ ุง endpoint ูพุฏุง ูุดุฏ
   - **500 Internal Server Error**: ุฎุทุง ุณุฑูุฑ

4. **ุชุบุฑ URL**: ุงฺฏุฑ ุณุฑูุฑ ุฑู ูพูุฑุช ุฏฺฏุฑ ุงุฌุฑุง ูโุดูุฏุ ูุงู ุชุณุช ุฑุง ูุฑุงุด ฺฉูุฏ:
   ```python
   BASE_URL = "http://127.0.0.1:8000"  # ูพูุฑุช ุฑุง ุชุบุฑ ุฏูุฏ
   ```

## ๐งช ุชุณุช ููู App ูุง ุจู ุตูุฑุช ฺฉุฌุง

ูโุชูุงูุฏ ฺฉ ุงุณฺฉุฑูพุช wrapper ุงุฌุงุฏ ฺฉูุฏ:

```bash
#!/bin/bash
echo "Running all API tests..."
python test_users_app.py
python test_roadmap_app.py
python test_exam_app.py
python test_media_app.py
echo "All tests completed!"
```

ุง ุฏุฑ Python:

```python
import subprocess

apps = [
    'test_users_app.py',
    'test_roadmap_app.py',
    'test_exam_app.py',
    'test_media_app.py'
]

for app in apps:
    print(f"\n{'='*60}")
    print(f"Running {app}")
    print('='*60)
    subprocess.run(['python', app])
```

## ๐ ูพุดุชุจุงู

ุฏุฑ ุตูุฑุช ุจุฑูุฒ ูุดฺฉู:
1. ูุทูุฆู ุดูุฏ ุณุฑูุฑ Django ุฏุฑ ุญุงู ุงุฌุฑุง ุงุณุช
2. ุจุฑุฑุณ ฺฉูุฏ ฺฉู Token ูุนุชุจุฑ ุงุณุช (ุฏุฑ ุตูุฑุช ูุงุฒ)
3. ูุงฺฏโูุง ุณุฑูุฑ ุฑุง ุจุฑุฑุณ ฺฉูุฏ
4. ูุทูุฆู ุดูุฏ ฺฉู ุฌุฏุงูู ุฏุฑ ุฏุชุงุจุณ ูุฌูุฏ ุฏุงุฑูุฏ

